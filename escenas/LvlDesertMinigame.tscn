[gd_scene load_steps=20 format=2]

[ext_resource path="res://fuentes/FredokaOne-Regular.ttf" type="DynamicFontData" id=1]
[ext_resource path="res://BtnSalir.png" type="Texture" id=2]
[ext_resource path="res://Question-bottom.png" type="Texture" id=3]
[ext_resource path="res://Question.png" type="Texture" id=4]
[ext_resource path="res://ImgPopup.png" type="Texture" id=5]
[ext_resource path="res://BtnMinigame.png" type="Texture" id=6]

[sub_resource type="GDScript" id=1]
script/source = "extends Node
const Questions = [{\"OpcionD\":\"Vanellus chiletsis\",\"OpcionC\":\"Fumarius leucopus\",\"OpcionB\":\"Elaenia chiricuences\",\"ANIMAL\":\"Vanellus chilensis\",\"OpcionA\":\"Chilensis solitario\",\"Correcta\":\"Vanellus chilensis\",\"Pregunta\":\"¿Cuales el nombre cientifico del alcaravan?\"},{\"OpcionD\":\"Ninguna de las anteriores\",\"OpcionC\":\"Bartramia longicauda\",\"OpcionB\":\"calidris fusicollis\",\"ANIMAL\":\"Tringa solitaria\",\"OpcionA\":\"Atitis Macularius\",\"Correcta\":\"Andarríos solitario\",\"Pregunta\":\"¿Nombres comunes de la Tigüisa?\"},{\"OpcionD\":\"Preocupacion mayor\",\"OpcionC\":\"Amenazado\",\"OpcionB\":\"Extinto\",\"ANIMAL\":\"Polioptila plumbea\",\"OpcionA\":\"Vulnerable\",\"Correcta\":\"Preocupacion menor\",\"Pregunta\":\"¿cual es el estado de conservacion de la Arrocerito?\"},{\"OpcionD\":\"15 cm\",\"OpcionC\":\"12 cm\",\"OpcionB\":\"30 cm\",\"ANIMAL\":\"Thraupis episcopus\",\"OpcionA\":\"22 cm\",\"Correcta\":\"18 cm\",\"Pregunta\":\"¿Cual es la longitud en cm del Azulejo?\"},{\"OpcionD\":\"frutas\",\"OpcionC\":\"Semillas\",\"OpcionB\":\"Carnes\",\"ANIMAL\":\"Pitangus sulphuratus\",\"OpcionA\":\"Alimentos descompuestos\",\"Correcta\":\"\\\"Larvas\",\"Pregunta\":\"¿Cual es la alimentación del Bichofue?\"},{\"OpcionD\":\"Coracidae\",\"OpcionC\":\"Coraldeldae\",\"OpcionB\":\"Coralidus\",\"ANIMAL\":\"Momotus Subrufescens\",\"OpcionA\":\"Coraciforte\",\"Correcta\":\"Coraciforme\",\"Pregunta\":\"¿A que especie de aves pertenece barranquero coronado?\"},{\"OpcionD\":\"2 a 4 huevos\",\"OpcionC\":\"Solo 2 huevos\",\"OpcionB\":\"Solo 1 huevos\",\"ANIMAL\":\"Megarynchus pitangua\",\"OpcionA\":\"No pone huevos\",\"Correcta\":\"2 a 3 huevos\",\"Pregunta\":\"¿Cuantos huevos pone la hembra bicho fue picudo?\"},{\"OpcionD\":\"Bosque humedo\",\"OpcionC\":\"Bosque seco tropical\",\"OpcionB\":\"Sotobosque\",\"ANIMAL\":\"Hypnelus ruficollis\",\"OpcionA\":\"Ninguna de las anteriores\",\"Correcta\":\"Bosque seco y Matorrales\",\"Pregunta\":\"¿Cual es el habitat del bobo punteado?\"},{\"OpcionD\":\"Como hijo del sol\",\"OpcionC\":\"Como padre de todo\",\"OpcionB\":\"Como comida\",\"ANIMAL\":\"Nyctidromus albicollis\",\"OpcionA\":\"Todas las anteriores\",\"Correcta\":\"Como hijo de la luna\",\"Pregunta\":\"¿Como es considerado el chotacabra en algunas comunidades indigenas?\"},{\"OpcionD\":\"Chotata\",\"OpcionC\":\"Strigidae\",\"OpcionB\":\"Glaucidium\",\"ANIMAL\":\"Glaucidium jardinii\",\"OpcionA\":\"Caprimulgidae\",\"Correcta\":\"Ninguna \",\"Pregunta\":\"¿Cuales son las subespecies del Mochuelo Andino?\"},{\"OpcionD\":\"Rapido\",\"OpcionC\":\"Veloz\",\"OpcionB\":\"Acelerado\",\"ANIMAL\":\"Cara cara cheriway\",\"OpcionA\":\"No vuela\",\"Correcta\":\"Lento\",\"Pregunta\":\"¿Como es el vuelo del Cari cari?\"},{\"OpcionD\":\"America del norte\",\"OpcionC\":\"Centro America\",\"OpcionB\":\"South Africa\",\"ANIMAL\":\"Furnarius leocopus\",\"OpcionA\":\"Europa y Asia \",\"Correcta\":\"America del sur\",\"Pregunta\":\"¿De donde es originario el Carga barro?\"},{\"OpcionD\":\"Agujeros en las rocas\",\"OpcionC\":\"Agujeros en las hojas\",\"OpcionB\":\"Agujeros en arboles vivos\",\"ANIMAL\":\"Melanerpes rubricapillus\",\"OpcionA\":\"Agujeros en arboles mojados\",\"Correcta\":\"Agujeros de un arbol muerto\",\"Pregunta\":\"¿Donde anidan los carpinteros?\"},{\"OpcionD\":\"Picicoe\",\"OpcionC\":\"Pisingo\",\"OpcionB\":\"Pincelidae\",\"ANIMAL\":\"Picomnus cinnamomeus\",\"OpcionA\":\"Picidildae\",\"Correcta\":\"Picidae\",\"Pregunta\":\"¿A que familia pertenece el Carpintero castaño?\"},{\"OpcionD\":\"Entre Enero y Febrero\",\"OpcionC\":\"Entre Mayo y Junio\",\"OpcionB\":\"Entre Junio y julio\",\"ANIMAL\":\"Dryocopus lineatus\",\"OpcionA\":\"Entre Diciembre y Enero\",\"Correcta\":\"Entre Marzo y Abril\",\"Pregunta\":\"¿En que epoca del año crian los Carpinteros reales?\"},{\"OpcionD\":\"4 a 2 huevos\",\"OpcionC\":\"2 a 3 huevos\",\"OpcionB\":\"7 a 10 huevos\",\"ANIMAL\":\"Forpus conspicillatus\",\"OpcionA\":\"8 huevos\",\"Correcta\":\"5 a 6 huevos\",\"Pregunta\":\"¿Cuantos huevos pone el cascabelito hembra? \"},{\"OpcionD\":\"Poco distribuida\",\"OpcionC\":\"No esta dsistribuida\",\"OpcionB\":\"Se desconoce\",\"ANIMAL\":\"Pionus menstruus\",\"OpcionA\":\"Ninguna de las anteriores\",\"Correcta\":\"Ampliamente distribuida\",\"Pregunta\":\"¿Cual es el estatus del Chajin?\"},{\"OpcionD\":\"No tiene crias\",\"OpcionC\":\"Todas las anteriores\",\"OpcionB\":\"Cria solitaria\",\"ANIMAL\":\"Campylorhynchus nuchalis\",\"OpcionA\":\"Cria sin cooperar\",\"Correcta\":\"Cria cooperativa\",\"Pregunta\":\"¿De que forma cria sus polluelos el cucarachero?\"},{\"OpcionD\":\"De otros huevos\",\"OpcionC\":\"De frutas\",\"OpcionB\":\"De verduras\",\"ANIMAL\":\"Campylorhynchus griseus\",\"OpcionA\":\"De madera\",\"Correcta\":\"De sus huevos\",\"Pregunta\":\"¿De que se alimenta el chupahuevos?\"},{\"OpcionD\":\"Azul\",\"OpcionC\":\"Verde\",\"OpcionB\":\"Rojo\",\"ANIMAL\":\"Crotophaga sulcirostris\",\"OpcionA\":\"Amarillo\",\"Correcta\":\"Negro\",\"Pregunta\":\"¿De que color es el Garrapatero normalmente?\"},{\"OpcionD\":\"Bosques\",\"OpcionC\":\"Praderas\",\"OpcionB\":\"Pantanos\",\"ANIMAL\":\"Theristicus caudatus\",\"OpcionA\":\"Laderas \",\"Correcta\":\"Laderas pedregosas\",\"Pregunta\":\"¿En que lugar anida la cocla durante los meses de septiembre?\"},{\"OpcionD\":\"Grande\",\"OpcionC\":\"Pequeño\",\"OpcionB\":\"Diminuto\",\"ANIMAL\":\"Amazilia tzacatl\",\"OpcionA\":\"Normal\",\"Correcta\":\"Mediano\",\"Pregunta\":\"¿De que tamaño es el Colibrí?\"},{\"OpcionD\":\"Alrededor 25 gramos\",\"OpcionC\":\"Alrededor 26 gramos\",\"OpcionB\":\"Alrededor 23 gramo\",\"ANIMAL\":\"Sakesphorus canadensis\",\"OpcionA\":\"Alrededor 20 gramos\",\"Correcta\":\"Alrededor 24 gramos\",\"Pregunta\":\"¿Cuanto pesa el Copeton negro?\"},{\"OpcionD\":\"Todas las anteriores \",\"OpcionC\":\"No hacen nada\",\"OpcionB\":\"Vuelan a largas distancias\",\"ANIMAL\":\"Burhinus bistriatus\",\"OpcionA\":\"Son muy buenas nadadoras a distancias cortas\",\"Correcta\":\"Son buenas corredoras y lo hacen velozmente\",\"Pregunta\":\"¿Cual es el comportamiento del Alcaravanes venezolano?\"},{\"OpcionD\":\"Recidumbre\",\"OpcionC\":\"Robustes\",\"OpcionB\":\"Desfallecimiento\",\"ANIMAL\":\"Bulbucus ibis\",\"OpcionA\":\"Ahogamiento\",\"Correcta\":\"Inanición\",\"Pregunta\":\"¿Cual es la principal causa de mortalidad en las crias de la garza ganadera?\"}]
var Respondidas = []
var PreguntaActual;
func _ready():
	_loadPregunta()
	pass

func _loadPregunta():
	$Respondidas.text = \"Question\\n\"+str(Respondidas.size()+1);
	var rng = RandomNumberGenerator.new()
	var lista = Questions;
	lista = shuffleList(lista);
	PreguntaActual = lista[rng.randi()%lista.size()]
	$Panel/Question.text = PreguntaActual.Pregunta
	if(Respondidas.size() == 15):
		$Win.popup();
	else:	
		_preguntaMap()

func _preguntaMap():
	var rng = RandomNumberGenerator.new()
	var lista = [PreguntaActual.OpcionA,PreguntaActual.OpcionB,PreguntaActual.OpcionC,PreguntaActual.OpcionD]
	var grilla = $CenterContainer/Grilla.get_children()
	rng.randomize()
	var i = rng.randi()%grilla.size()
	grilla[i].get_children()[0].text = PreguntaActual.Correcta
	for j in grilla:
		rng.randomize()
		var d = rng.randi()%lista.size()
		if(j != grilla[i]):
			j.get_children()[0].text = lista[d];
			lista.remove(d)

func shuffleList(list):
	var rng = RandomNumberGenerator.new()
	rng.randomize()
	var shuffledList = [] 
	var indexList = range(list.size())
# warning-ignore:unused_variable
	for i in range(list.size()):
       	var x = rng.randi()%indexList.size()
       	shuffledList.append(list[indexList[x]])
       	indexList.remove(x)
	return shuffledList

func _Probar(Opcion):
	if(Opcion == PreguntaActual.Correcta):
		Respondidas.append(Opcion)
		_ready()
	else:
		$GameOver.popup()

func _on_OpcionA_pressed():
	_Probar($CenterContainer/Grilla/OpcionA/Pregunta.text)


func _on_OpcionB_pressed():
	_Probar($CenterContainer/Grilla/OpcionB/Pregunta.text)


func _on_OpcionC_pressed():
	_Probar($CenterContainer/Grilla/OpcionC/Pregunta.text)


func _on_OpcionD_pressed():
	_Probar($CenterContainer/Grilla/OpcionD/Pregunta.text)

func _Game_Over():
	$GameOver.popup()

func _on_Salir_pressed():
	get_tree().change_scene(\"res://escenas/LvlDesierto.tscn\")
"

[sub_resource type="Gradient" id=2]
offsets = PoolRealArray( 0, 0.995536 )
colors = PoolColorArray( 0, 0.027451, 0.141176, 1, 0, 0.027451, 0.141176, 1 )

[sub_resource type="GradientTexture" id=3]
gradient = SubResource( 2 )

[sub_resource type="DynamicFont" id=4]
size = 60
font_data = ExtResource( 1 )

[sub_resource type="DynamicFont" id=5]
size = 60
font_data = ExtResource( 1 )

[sub_resource type="GDScript" id=6]
script/source = "extends Label

var DisplayValue = 60;
onready var Timer = get_node(\"Timer\")
func _ready():
	Timer.wait_time = 1;
	Timer.start();

func _on_Timer_timeout():
	if DisplayValue!=0:
		DisplayValue -= 1;
	else:
		get_parent()._Game_Over()
	text = \"Time\\n\"+str(DisplayValue);
"

[sub_resource type="DynamicFont" id=7]
size = 80
font_data = ExtResource( 1 )

[sub_resource type="StyleBoxEmpty" id=8]

[sub_resource type="DynamicFont" id=9]
size = 60
use_filter = true
font_data = ExtResource( 1 )

[sub_resource type="DynamicFont" id=10]
size = 50
font_data = ExtResource( 1 )

[sub_resource type="DynamicFont" id=11]
size = 70
font_data = ExtResource( 1 )

[sub_resource type="DynamicFont" id=12]
size = 90
font_data = ExtResource( 1 )

[sub_resource type="DynamicFont" id=13]
size = 60
font_data = ExtResource( 1 )

[node name="Node" type="Node"]
script = SubResource( 1 )

[node name="TextureRect" type="TextureRect" parent="."]
anchor_right = 1.0
anchor_bottom = 1.0
texture = SubResource( 3 )
expand = true
stretch_mode = 1

[node name="Respondidas" type="Label" parent="."]
anchor_left = 0.5
anchor_right = 0.5
margin_left = -131.5
margin_right = 131.5
margin_bottom = 183.0
custom_fonts/font = SubResource( 4 )
text = "Question
1"
align = 1
valign = 1

[node name="Tiempo" type="Label" parent="."]
editor/display_folded = true
anchor_left = 1.0
anchor_right = 1.0
margin_left = -209.0
margin_bottom = 170.0
custom_fonts/font = SubResource( 5 )
text = "Time
1:00"
align = 1
valign = 1
script = SubResource( 6 )

[node name="Timer" type="Timer" parent="Tiempo"]

[node name="Salir" type="TextureButton" parent="."]
editor/display_folded = true
margin_right = 276.0
margin_bottom = 191.0
texture_normal = ExtResource( 2 )
texture_pressed = ExtResource( 2 )
texture_hover = ExtResource( 2 )
texture_disabled = ExtResource( 2 )
texture_focused = ExtResource( 2 )
expand = true

[node name="Label" type="Label" parent="Salir"]
anchor_right = 1.0
anchor_bottom = 1.0
custom_fonts/font = SubResource( 7 )
text = "Exit"
align = 1
valign = 1

[node name="Panel" type="Panel" parent="."]
anchor_right = 1.0
margin_left = 4.0
margin_top = 193.0
margin_right = 4.0
margin_bottom = 835.0
custom_styles/panel = SubResource( 8 )

[node name="Question" type="Label" parent="Panel"]
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
margin_left = -353.0
margin_top = -288.0
margin_right = 349.0
margin_bottom = -192.0
custom_fonts/font = SubResource( 9 )
text = "Animal"
align = 1
valign = 1
autowrap = true

[node name="CenterContainer" type="CenterContainer" parent="."]
anchor_top = 1.0
anchor_right = 1.0
anchor_bottom = 1.0
margin_top = -1103.0

[node name="Grilla" type="GridContainer" parent="CenterContainer"]
margin_top = 145.0
margin_right = 780.0
margin_bottom = 957.0

[node name="OpcionA" type="TextureButton" parent="CenterContainer/Grilla"]
margin_right = 780.0
margin_bottom = 200.0
rect_min_size = Vector2( 780, 200 )
texture_normal = ExtResource( 3 )
texture_pressed = ExtResource( 4 )
texture_hover = ExtResource( 4 )
texture_disabled = ExtResource( 3 )
texture_focused = ExtResource( 4 )
expand = true

[node name="Pregunta" type="Label" parent="CenterContainer/Grilla/OpcionA"]
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
margin_left = -354.0
margin_top = -70.0
margin_right = 354.0
margin_bottom = 70.0
custom_fonts/font = SubResource( 10 )
text = "hola mundo"
autowrap = true

[node name="OpcionB" type="TextureButton" parent="CenterContainer/Grilla"]
editor/display_folded = true
margin_top = 204.0
margin_right = 780.0
margin_bottom = 404.0
rect_min_size = Vector2( 780, 200 )
texture_normal = ExtResource( 3 )
texture_pressed = ExtResource( 4 )
texture_hover = ExtResource( 4 )
texture_disabled = ExtResource( 3 )
texture_focused = ExtResource( 4 )
expand = true

[node name="Pregunta" type="Label" parent="CenterContainer/Grilla/OpcionB"]
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
margin_left = -354.0
margin_top = -70.0
margin_right = 354.0
margin_bottom = 70.0
custom_fonts/font = SubResource( 10 )
text = "hola mundo"
autowrap = true

[node name="OpcionC" type="TextureButton" parent="CenterContainer/Grilla"]
editor/display_folded = true
margin_top = 408.0
margin_right = 780.0
margin_bottom = 608.0
rect_min_size = Vector2( 780, 200 )
texture_normal = ExtResource( 3 )
texture_pressed = ExtResource( 4 )
texture_hover = ExtResource( 4 )
texture_disabled = ExtResource( 3 )
texture_focused = ExtResource( 4 )
expand = true

[node name="Pregunta" type="Label" parent="CenterContainer/Grilla/OpcionC"]
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
margin_left = -354.0
margin_top = -70.0
margin_right = 354.0
margin_bottom = 70.0
custom_fonts/font = SubResource( 10 )
text = "hola mundo"
autowrap = true

[node name="OpcionD" type="TextureButton" parent="CenterContainer/Grilla"]
editor/display_folded = true
margin_top = 612.0
margin_right = 780.0
margin_bottom = 812.0
rect_min_size = Vector2( 780, 200 )
texture_normal = ExtResource( 3 )
texture_pressed = ExtResource( 4 )
texture_hover = ExtResource( 4 )
texture_disabled = ExtResource( 3 )
texture_focused = ExtResource( 4 )
expand = true

[node name="Pregunta" type="Label" parent="CenterContainer/Grilla/OpcionD"]
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
margin_left = -354.0
margin_top = -70.0
margin_right = 354.0
margin_bottom = 70.0
custom_fonts/font = SubResource( 10 )
text = "hola mundo"
autowrap = true

[node name="GameOver" type="Popup" parent="."]
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
margin_left = -467.5
margin_top = -435.5
margin_right = 467.5
margin_bottom = 435.5

[node name="TextureRect" type="TextureRect" parent="GameOver"]
anchor_right = 1.0
anchor_bottom = 1.0
margin_left = -8.0
margin_right = 4.0
margin_bottom = -72.0
texture = ExtResource( 5 )
expand = true
stretch_mode = 1

[node name="Salir" type="TextureButton" parent="GameOver"]
editor/display_folded = true
anchor_left = 0.5
anchor_top = 1.0
anchor_right = 0.5
anchor_bottom = 1.0
margin_left = -228.5
margin_top = -185.0
margin_right = 213.5
texture_normal = ExtResource( 6 )
texture_pressed = ExtResource( 6 )
texture_hover = ExtResource( 6 )
texture_disabled = ExtResource( 6 )
texture_focused = ExtResource( 6 )
expand = true

[node name="Label" type="Label" parent="GameOver/Salir"]
anchor_right = 1.0
anchor_bottom = 1.0
custom_fonts/font = SubResource( 11 )
text = "Salir"
align = 1
valign = 1

[node name="Label" type="Label" parent="GameOver"]
anchor_right = 1.0
margin_top = 48.0
margin_bottom = 387.0
custom_fonts/font = SubResource( 12 )
text = "GAME OVER"
align = 1
valign = 1

[node name="Label2" type="Label" parent="GameOver"]
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
margin_left = -411.5
margin_top = -91.2472
margin_right = 411.5
margin_bottom = 235.753
custom_fonts/font = SubResource( 13 )
text = "Upps!! lo siento intentalo de nuevo mas tarde"
align = 1
valign = 1
autowrap = true

[node name="Win" type="Popup" parent="."]
editor/display_folded = true
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
margin_left = -467.5
margin_top = -435.5
margin_right = 467.5
margin_bottom = 435.5

[node name="TextureRect" type="TextureRect" parent="Win"]
anchor_right = 1.0
anchor_bottom = 1.0
margin_left = -8.0
margin_right = 4.0
margin_bottom = -72.0
texture = ExtResource( 5 )
expand = true
stretch_mode = 1

[node name="Salir" type="TextureButton" parent="Win"]
editor/display_folded = true
anchor_left = 0.5
anchor_top = 1.0
anchor_right = 0.5
anchor_bottom = 1.0
margin_left = -228.5
margin_top = -185.0
margin_right = 213.5
texture_normal = ExtResource( 6 )
texture_pressed = ExtResource( 6 )
texture_hover = ExtResource( 6 )
texture_disabled = ExtResource( 6 )
texture_focused = ExtResource( 6 )
expand = true

[node name="Label" type="Label" parent="Win/Salir"]
anchor_right = 1.0
anchor_bottom = 1.0
custom_fonts/font = SubResource( 11 )
text = "Salir"
align = 1
valign = 1

[node name="Label" type="Label" parent="Win"]
anchor_right = 1.0
margin_top = 48.0
margin_bottom = 387.0
custom_fonts/font = SubResource( 12 )
text = "YOU WIN"
align = 1
valign = 1

[node name="Label2" type="Label" parent="Win"]
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
margin_left = -411.5
margin_top = -91.2472
margin_right = 411.5
margin_bottom = 235.753
custom_fonts/font = SubResource( 13 )
text = "Gracias por jugar"
align = 1
valign = 1
autowrap = true
[connection signal="timeout" from="Tiempo/Timer" to="Tiempo" method="_on_Timer_timeout"]
[connection signal="pressed" from="Salir" to="." method="_on_Salir_pressed"]
[connection signal="pressed" from="CenterContainer/Grilla/OpcionA" to="." method="_on_OpcionA_pressed"]
[connection signal="pressed" from="CenterContainer/Grilla/OpcionB" to="." method="_on_OpcionB_pressed"]
[connection signal="pressed" from="CenterContainer/Grilla/OpcionC" to="." method="_on_OpcionC_pressed"]
[connection signal="pressed" from="CenterContainer/Grilla/OpcionD" to="." method="_on_OpcionD_pressed"]
[connection signal="pressed" from="GameOver/Salir" to="." method="_on_Salir_pressed"]
[connection signal="pressed" from="Win/Salir" to="." method="_on_Salir_pressed"]
