[gd_scene load_steps=20 format=2]

[ext_resource path="res://fuentes/FredokaOne-Regular.ttf" type="DynamicFontData" id=1]
[ext_resource path="res://BtnSalir.png" type="Texture" id=2]
[ext_resource path="res://Question-bottom.png" type="Texture" id=3]
[ext_resource path="res://Question.png" type="Texture" id=4]
[ext_resource path="res://ImgPopup.png" type="Texture" id=5]
[ext_resource path="res://BtnMinigame.png" type="Texture" id=6]

[sub_resource type="GDScript" id=1]
script/source = "extends Node
const Questions = [
 {
   \"Pregunta\": \"Cuanto más profunda es la herida…\",
   \"OpcionA\": \"Mas curva la aguja\",
   \"OpcionB\": \"Más corta la aguja\",
   \"OpcionC\": \"Mas recta la aguja\",
   \"OpcionD\": \"Ninguna de las anteriores\",
   \"Correcta\": \"Mas curva la aguja\"
 },
 {
   \"Pregunta\": \"Agulos de curvatura\",
   \"OpcionA\": \"N° 1 , N°2, N°3, N°4\",
   \"OpcionB\": \"5/8, recta,1/2, 1/4, 3/8\",
   \"OpcionC\": \"Recta, semi curva, curva\",
   \"OpcionD\": \"Todas las anteriores\",
   \"Correcta\": \"5/8, recta,1/2, 1/4, 3/8\"
 },
 {
   \"Pregunta\": \"Caracteristica esencial de una aguja quirurgica\",
   \"OpcionA\": \"Largas y afiladas\",
   \"OpcionB\": \"Curva y fuerte\",
   \"OpcionC\": \"Fuertes e inertes\",
   \"OpcionD\": \"Fuertes y resistentes\",
   \"Correcta\": \"Fuertes e inertes\"
 },
 {
   \"Pregunta\": \"Determinantes de una sutura ideal\",
   \"OpcionA\": \"El tejido a suturar\",
   \"OpcionB\": \"Tiempo de reabsorcion\",
   \"OpcionC\": \"Tipo de herida\",
   \"OpcionD\": \"Tipo de material de la sutura\",
   \"Correcta\": \"Todas las anteriores\"
 },
 {
   \"Pregunta\": \"Que datos lleva escrito el paquete de sutura\",
   \"OpcionA\": \"Tipo, tamaño de la aguja, fechas\",
   \"OpcionB\": \"Curvatura de agujas\",
   \"OpcionC\": \"Numero de elementos \",
   \"OpcionD\": \"Uso de elementos\",
   \"Correcta\": \"Tipo, tamaño de la aguja, fechas\"
 },
 {
   \"Pregunta\": \"La funcion de la sutura es\",
   \"OpcionA\": \"Proteger la herida\",
   \"OpcionB\": \"Aproximar bordes de la herida\",
   \"OpcionC\": \"Mejorar aspecto estetico de la cicatriz\",
   \"OpcionD\": \"Todas las anteriores\",
   \"Correcta\": \"Todas las anteriores\"
 },
 {
   \"Pregunta\": \"Las suturas pueden ser de\",
   \"OpcionA\": \"Hilo,nilon, seda\",
   \"OpcionB\": \"Hilo, grapas, SteriStrip, Salusplay\",
   \"OpcionC\": \"Nilon, grapas, seda\",
   \"OpcionD\": \"Ninguna de las anteriores\",
   \"Correcta\": \"Hilo, grapas, SteriStrip, Salusplay\"
 },
 {
   \"Pregunta\": \"Tipos de sutura según su estructura\",
   \"OpcionA\": \"naturales y sinteticas\",
   \"OpcionB\": \"filamentosa y multifilamentosa\",
   \"OpcionC\": \"gruesas y delgada\",
   \"OpcionD\": \"Traumaticas, atraumaticas\",
   \"Correcta\": \"Traumaticas, atraumaticas\"
 },
 {
   \"Pregunta\": \"Tipos de sutura según su origen vegetal\",
   \"OpcionA\": \"Lino, algodón\",
   \"OpcionB\": \"algodón y absorvible\",
   \"OpcionC\": \"seco y humedo\",
   \"OpcionD\": \"algodón y sales de cobre\",
   \"Correcta\": \"Lino, algodón\"
 },
 {
   \"Pregunta\": \"Suturas de origen mineral\",
   \"OpcionA\": \"Hilo,nilon, seda\",
   \"OpcionB\": \"curva, y recta\",
   \"OpcionC\": \"Acero,plata\",
   \"OpcionD\": \"algodón , cobre y acero\",
   \"Correcta\": \"Acero,plata\"
 },
 {
   \"Pregunta\": \"Suturas de origen animal\",
   \"OpcionA\": \"algodón, plata y acero\",
   \"OpcionB\": \"Seda, catgut\",
   \"OpcionC\": \"acero, seda y cargut \",
   \"OpcionD\": \"algoon, catgut y filamentosa\",
   \"Correcta\": \"Seda, catcut\"
 },
 {
   \"Pregunta\": \"Tipos de sutura según el acabado y la manipulacion industrial\",
   \"OpcionA\": \"curva y recta\",
   \"OpcionB\": \"tipo e herida\",
   \"OpcionC\": \"filamentosa, naturales y sinteticas\",
   \"OpcionD\": \"Monofilamento, Multifilamento\",
   \"Correcta\": \"Monofilamento, Multifilamento\"
 },
 {
   \"Pregunta\": \"Suturas de origen sintetico\",
   \"OpcionA\": \"Poliamides\",
   \"OpcionB\": \"Polidioxanona, polipropileno\",
   \"OpcionC\": \"Polietileno, poliesteres\",
   \"OpcionD\": \"Todas las anteriores\",
   \"Correcta\": \"Todas las anteriores\"
 },
 {
   \"Pregunta\": \"Sutura utilizada en las mucosas urinarias\",
   \"OpcionA\": \"Catgut cromado\",
   \"OpcionB\": \"polipropileno\",
   \"OpcionC\": \"seda suelta\",
   \"OpcionD\": \"naylon trenzado\",
   \"Correcta\": \"Catgut cromado\"
 },
 {
   \"Pregunta\": \"Sutura utilizada en implatacion de vulvas cardiacas\",
   \"OpcionA\": \"vicryl\",
   \"OpcionB\": \"seda, catgut y vicryl\",
   \"OpcionC\": \"Polyester\",
   \"OpcionD\": \"catgut simple\",
   \"Correcta\": \"Polyester\"
 },
 {
   \"Pregunta\": \"Sutura ideal utilizada en tejidos blandos\",
   \"OpcionA\": \"catgut cromado\",
   \"OpcionB\": \"seda suelta\",
   \"OpcionC\": \"polipropileno\",
   \"OpcionD\": \"Vicryl\",
   \"Correcta\": \"Vicryl\"
 },
 {
   \"Pregunta\": \"Materia prima del catgut cromico\",
   \"OpcionA\": \"Intestinos de vaca u oveja con sales de cromo\",
   \"OpcionB\": \"algodón\",
   \"OpcionC\": \"gusano de seda\",
   \"OpcionD\": \"polidioxanona\",
   \"Correcta\": \"Intestinos de vaca y oveja\"
 },
 {
   \"Pregunta\": \"Tiempo minimo de absorcion del PDS\",
   \"OpcionA\": \"15 dias\",
   \"OpcionB\": \"90 dias\",
   \"OpcionC\": \"30 dias\",
   \"OpcionD\": \"120 dias\",
   \"Correcta\": \"90 dias\"
 },
 {
   \"Pregunta\": \"Material de sutura mas grande\",
   \"OpcionA\": \"0/ 5\",
   \"OpcionB\": \"2\",
   \"OpcionC\": \"N°5\",
   \"OpcionD\": \"0\",
   \"Correcta\": \"N°5\"
 }
]
var Respondidas = []
var PreguntaActual;
func _ready():
	_loadPregunta()
	pass

func _loadPregunta():
	$Respondidas.text = \"Question\\n\"+str(Respondidas.size()+1);
	var rng = RandomNumberGenerator.new()
	var lista = Questions;
	lista = shuffleList(lista);
	PreguntaActual = lista[rng.randi()%lista.size()]
	$Panel/Question.text = PreguntaActual.Pregunta
	if(Respondidas.size() == 15):
		$Win.popup();
	else:	
		_preguntaMap()

func _preguntaMap():
	var rng = RandomNumberGenerator.new()
	var lista = [PreguntaActual.OpcionA,PreguntaActual.OpcionB,PreguntaActual.OpcionC,PreguntaActual.OpcionD]
	var grilla = $CenterContainer/Grilla.get_children()
	rng.randomize()
	var i = rng.randi()%grilla.size()
	grilla[i].get_children()[0].text = PreguntaActual.Correcta
	for j in grilla:
		rng.randomize()
		var d = rng.randi()%lista.size()
		if(j != grilla[i]):
			j.get_children()[0].text = lista[d];
			lista.remove(d)

func shuffleList(list):
	var rng = RandomNumberGenerator.new()
	rng.randomize()
	var shuffledList = [] 
	var indexList = range(list.size())
# warning-ignore:unused_variable
	for i in range(list.size()):
       	var x = rng.randi()%indexList.size()
       	shuffledList.append(list[indexList[x]])
       	indexList.remove(x)
	return shuffledList

func _Probar(Opcion):
	if(Opcion == PreguntaActual.Correcta):
		Respondidas.append(Opcion)
		_ready()
	else:
		$GameOver.popup()

func _on_OpcionA_pressed():
	_Probar($CenterContainer/Grilla/OpcionA/Pregunta.text)


func _on_OpcionB_pressed():
	_Probar($CenterContainer/Grilla/OpcionB/Pregunta.text)


func _on_OpcionC_pressed():
	_Probar($CenterContainer/Grilla/OpcionC/Pregunta.text)


func _on_OpcionD_pressed():
	_Probar($CenterContainer/Grilla/OpcionD/Pregunta.text)

func _Game_Over():
	$GameOver.popup()

func _on_Salir_pressed():
	get_tree().change_scene(\"res://escenas/MinigameUno.tscn\")
"

[sub_resource type="Gradient" id=2]
offsets = PoolRealArray( 0, 0.995536 )
colors = PoolColorArray( 0, 0.027451, 0.141176, 1, 0, 0.027451, 0.141176, 1 )

[sub_resource type="GradientTexture" id=3]
gradient = SubResource( 2 )

[sub_resource type="DynamicFont" id=4]
size = 35
font_data = ExtResource( 1 )

[sub_resource type="DynamicFont" id=5]
size = 35
font_data = ExtResource( 1 )

[sub_resource type="GDScript" id=6]
script/source = "extends Label

var DisplayValue = 60;
onready var Timer = get_node(\"Timer\")
func _ready():
	Timer.wait_time = 1;
	Timer.start();

func _on_Timer_timeout():
	if DisplayValue!=0:
		DisplayValue -= 1;
	else:
		get_parent()._Game_Over()
	text = \"Time\\n\"+str(DisplayValue);
"

[sub_resource type="DynamicFont" id=7]
size = 40
use_mipmaps = true
use_filter = true
font_data = ExtResource( 1 )

[sub_resource type="StyleBoxEmpty" id=8]

[sub_resource type="DynamicFont" id=9]
size = 50
use_filter = true
font_data = ExtResource( 1 )

[sub_resource type="DynamicFont" id=10]
size = 30
use_mipmaps = true
use_filter = true
font_data = ExtResource( 1 )

[sub_resource type="DynamicFont" id=11]
size = 50
font_data = ExtResource( 1 )

[sub_resource type="DynamicFont" id=12]
size = 70
font_data = ExtResource( 1 )

[sub_resource type="DynamicFont" id=13]
size = 45
font_data = ExtResource( 1 )

[node name="Node" type="Node"]
script = SubResource( 1 )

[node name="TextureRect" type="TextureRect" parent="."]
anchor_right = 1.0
anchor_bottom = 1.0
texture = SubResource( 3 )
expand = true
stretch_mode = 1

[node name="Respondidas" type="Label" parent="."]
anchor_left = 0.5
anchor_right = 0.5
margin_left = -100.0
margin_right = 100.0
margin_bottom = 116.0
custom_fonts/font = SubResource( 4 )
text = "Question
1"
align = 1

[node name="Tiempo" type="Label" parent="."]
editor/display_folded = true
anchor_left = 1.0
anchor_right = 1.0
margin_left = -146.0
margin_bottom = 112.0
custom_fonts/font = SubResource( 5 )
text = "Time
1:00"
align = 1
script = SubResource( 6 )

[node name="Timer" type="Timer" parent="Tiempo"]

[node name="Salir" type="TextureButton" parent="."]
editor/display_folded = true
margin_right = 170.0
margin_bottom = 100.0
texture_normal = ExtResource( 2 )
texture_pressed = ExtResource( 2 )
texture_hover = ExtResource( 2 )
texture_disabled = ExtResource( 2 )
texture_focused = ExtResource( 2 )
expand = true

[node name="Label" type="Label" parent="Salir"]
anchor_right = 1.0
anchor_bottom = 1.0
custom_fonts/font = SubResource( 7 )
text = "Exit"
align = 1
valign = 1

[node name="Panel" type="Panel" parent="."]
editor/display_folded = true
anchor_right = 1.0
margin_left = 4.0
margin_top = 193.0
margin_right = 4.0
margin_bottom = 835.0
custom_styles/panel = SubResource( 8 )

[node name="Question" type="Label" parent="Panel"]
anchor_right = 1.0
margin_top = -85.0
margin_bottom = 442.0
custom_fonts/font = SubResource( 9 )
text = "Animal"
align = 1
valign = 1
autowrap = true

[node name="CenterContainer" type="CenterContainer" parent="."]
editor/display_folded = true
anchor_left = 0.5
anchor_top = 1.0
anchor_right = 0.5
anchor_bottom = 1.0
margin_left = -284.0
margin_top = -812.0
margin_right = 284.0
rect_min_size = Vector2( 400, 812 )

[node name="Grilla" type="GridContainer" parent="CenterContainer"]
margin_top = 134.0
margin_right = 568.0
margin_bottom = 678.0
custom_constants/vseparation = 48

[node name="OpcionA" type="TextureButton" parent="CenterContainer/Grilla"]
margin_right = 568.0
margin_bottom = 100.0
rect_min_size = Vector2( 568, 100 )
texture_normal = ExtResource( 3 )
texture_pressed = ExtResource( 4 )
texture_hover = ExtResource( 4 )
texture_disabled = ExtResource( 3 )
texture_focused = ExtResource( 4 )
expand = true

[node name="Pregunta" type="Label" parent="CenterContainer/Grilla/OpcionA"]
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
margin_left = -250.0
margin_top = -50.0
margin_right = 250.0
margin_bottom = 50.0
custom_fonts/font = SubResource( 10 )
text = "hola mundo"
valign = 1
autowrap = true

[node name="OpcionB" type="TextureButton" parent="CenterContainer/Grilla"]
margin_top = 148.0
margin_right = 568.0
margin_bottom = 248.0
rect_min_size = Vector2( 568, 100 )
texture_normal = ExtResource( 3 )
texture_pressed = ExtResource( 4 )
texture_hover = ExtResource( 4 )
texture_disabled = ExtResource( 3 )
texture_focused = ExtResource( 4 )
expand = true

[node name="Pregunta" type="Label" parent="CenterContainer/Grilla/OpcionB"]
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
margin_left = -250.0
margin_top = -50.0
margin_right = 250.0
margin_bottom = 50.0
custom_fonts/font = SubResource( 10 )
text = "hola mundo"
valign = 1
autowrap = true

[node name="OpcionC" type="TextureButton" parent="CenterContainer/Grilla"]
margin_top = 296.0
margin_right = 568.0
margin_bottom = 396.0
rect_min_size = Vector2( 568, 100 )
texture_normal = ExtResource( 3 )
texture_pressed = ExtResource( 4 )
texture_hover = ExtResource( 4 )
texture_disabled = ExtResource( 3 )
texture_focused = ExtResource( 4 )
expand = true

[node name="Pregunta" type="Label" parent="CenterContainer/Grilla/OpcionC"]
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
margin_left = -250.0
margin_top = -50.0
margin_right = 250.0
margin_bottom = 50.0
custom_fonts/font = SubResource( 10 )
text = "hola mundo"
valign = 1
autowrap = true

[node name="OpcionD" type="TextureButton" parent="CenterContainer/Grilla"]
margin_top = 444.0
margin_right = 568.0
margin_bottom = 544.0
rect_min_size = Vector2( 568, 100 )
texture_normal = ExtResource( 3 )
texture_pressed = ExtResource( 4 )
texture_hover = ExtResource( 4 )
texture_disabled = ExtResource( 3 )
texture_focused = ExtResource( 4 )
expand = true

[node name="Pregunta" type="Label" parent="CenterContainer/Grilla/OpcionD"]
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
margin_left = -250.0
margin_top = -50.0
margin_right = 250.0
margin_bottom = 50.0
custom_fonts/font = SubResource( 10 )
text = "hola mundo"
valign = 1
autowrap = true

[node name="GameOver" type="Popup" parent="."]
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
margin_left = -360.0
margin_top = -353.0
margin_right = 360.0
margin_bottom = 361.0

[node name="TextureRect" type="TextureRect" parent="GameOver"]
anchor_right = 1.0
anchor_bottom = 1.0
margin_left = 35.0
margin_top = 96.0
margin_right = -34.0
margin_bottom = -72.0
texture = ExtResource( 5 )
expand = true
stretch_mode = 1

[node name="Salir" type="TextureButton" parent="GameOver"]
anchor_left = 0.5
anchor_top = 1.0
anchor_right = 0.5
anchor_bottom = 1.0
margin_left = -133.0
margin_top = -120.0
margin_right = 133.0
texture_normal = ExtResource( 6 )
texture_pressed = ExtResource( 6 )
texture_hover = ExtResource( 6 )
texture_disabled = ExtResource( 6 )
texture_focused = ExtResource( 6 )
expand = true

[node name="Label" type="Label" parent="GameOver/Salir"]
anchor_right = 1.0
anchor_bottom = 1.0
custom_fonts/font = SubResource( 11 )
text = "Salir"
align = 1
valign = 1

[node name="Label" type="Label" parent="GameOver"]
anchor_right = 1.0
margin_left = 160.0
margin_top = 48.0
margin_right = -174.0
margin_bottom = 387.0
custom_fonts/font = SubResource( 12 )
text = "GAME OVER"
align = 1
valign = 1

[node name="Label2" type="Label" parent="GameOver"]
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
margin_left = -295.5
margin_top = -91.5
margin_right = 279.5
margin_bottom = 235.5
custom_fonts/font = SubResource( 13 )
text = "Upps!! lo siento intentalo de nuevo mas tarde"
align = 1
valign = 1
autowrap = true

[node name="Win" type="Popup" parent="."]
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
margin_left = -360.0
margin_top = -311.5
margin_right = 360.0
margin_bottom = 311.5

[node name="TextureRect" type="TextureRect" parent="Win"]
anchor_right = 1.0
anchor_bottom = 1.0
margin_left = 39.0
margin_right = -40.0
margin_bottom = -72.0
texture = ExtResource( 5 )
expand = true
stretch_mode = 1

[node name="Salir" type="TextureButton" parent="Win"]
editor/display_folded = true
anchor_left = 0.5
anchor_top = 1.0
anchor_right = 0.5
anchor_bottom = 1.0
margin_left = -150.0
margin_top = -120.0
margin_right = 150.0
texture_normal = ExtResource( 6 )
texture_pressed = ExtResource( 6 )
texture_hover = ExtResource( 6 )
texture_disabled = ExtResource( 6 )
texture_focused = ExtResource( 6 )
expand = true

[node name="Label" type="Label" parent="Win/Salir"]
anchor_right = 1.0
anchor_bottom = 1.0
custom_fonts/font = SubResource( 11 )
text = "Salir"
align = 1
valign = 1

[node name="Label" type="Label" parent="Win"]
anchor_right = 1.0
margin_left = 51.0
margin_top = 48.0
margin_right = -51.0
margin_bottom = 256.0
custom_fonts/font = SubResource( 12 )
text = "YOU WIN"
align = 1
valign = 1

[node name="Label2" type="Label" parent="Win"]
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
margin_left = -411.5
margin_top = -91.2472
margin_right = 411.5
margin_bottom = 235.753
custom_fonts/font = SubResource( 13 )
text = "Gracias por jugar"
align = 1
valign = 1
autowrap = true
[connection signal="timeout" from="Tiempo/Timer" to="Tiempo" method="_on_Timer_timeout"]
[connection signal="pressed" from="Salir" to="." method="_on_Salir_pressed"]
[connection signal="pressed" from="CenterContainer/Grilla/OpcionA" to="." method="_on_OpcionA_pressed"]
[connection signal="pressed" from="CenterContainer/Grilla/OpcionB" to="." method="_on_OpcionB_pressed"]
[connection signal="pressed" from="CenterContainer/Grilla/OpcionC" to="." method="_on_OpcionC_pressed"]
[connection signal="pressed" from="CenterContainer/Grilla/OpcionD" to="." method="_on_OpcionD_pressed"]
[connection signal="pressed" from="GameOver/Salir" to="." method="_on_Salir_pressed"]
[connection signal="pressed" from="Win/Salir" to="." method="_on_Salir_pressed"]
